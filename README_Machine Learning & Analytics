# MVP ‚Äì Machine Learning & Analytics (DOLFUT)

## Descri√ß√£o do Problema
O mercado financeiro √© caracterizado por **alta volatilidade** e pela dificuldade hist√≥rica em prever movimentos de forma consistente.  
Apesar da ampla utiliza√ß√£o de indicadores t√©cnicos e estat√≠sticos, traders e investidores enfrentam limita√ß√µes ao tentar antecipar mudan√ßas de tend√™ncia com precis√£o.

**Quest√£o central:**  
Ser√° que **modelos de regress√£o e classifica√ß√£o aplicados a s√©ries temporais** podem identificar padr√µes relevantes e auxiliar na predi√ß√£o da **dire√ß√£o futura do Mini D√≥lar (DOLFUT)**?

## Objetivo
Explorar a aplica√ß√£o de **modelos de machine learning** (LSTM e Gradient Boosting) em s√©ries temporais financeiras, avaliando se a varia√ß√£o dos **retornos** e das **correla√ß√µes** entre ativos locais e globais pode ser utilizada para estimar **tend√™ncias futuras no Mini D√≥lar (DOLFUT)**.

Al√©m disso, o MVP busca:
- Comparar modelos tradicionais (GBM) com modelos neurais (LSTM).  
- Verificar se t√©cnicas de regress√£o e classifica√ß√£o trazem **ganhos reais sobre o baseline de persist√™ncia**.  
- Gerar **insights quantitativos** que possam ser utilizados como base para estrat√©gias de trading mais robustas.


## Hip√≥tese
A principal hip√≥tese que orienta este trabalho √©:

> A dificuldade de prever o movimento do mercado pode ser **parcialmente reduzida** utilizando modelos de regress√£o e classifica√ß√£o capazes de estimar tend√™ncias a partir de vari√°veis locais e globais.

Assim, espera-se que:
- Regress√µes bem definidas possam transformar **dados hist√≥ricos** em **sinais operacionais mais robustos**.  
- Modelos preditivos consigam superar abordagens triviais, como a **persist√™ncia**, oferecendo **vantagem estat√≠stica** em cen√°rios de decis√£o.  
- O enriquecimento do modelo com **informa√ß√µes externas** (ex.: DXY, SPX, Ibovespa, juros) melhore a capacidade de generaliza√ß√£o.


## Dataset
- **Fonte:** [Yahoo Finance](https://finance.yahoo.com/)  
- **Per√≠odo:** 01/01/2023 ‚Üí 31/12/2024  
- **Frequ√™ncia:** di√°ria  
- **Ativos principais:**  
  - **USDBRL=X** ‚Üí proxy para DOLFUT  
  - **^BVSP** ‚Üí proxy para Ibovespa (mercado local)  
  - Ativos globais adicionais (√≠ndices, moedas e commodities)

**Atributos coletados:**
- Pre√ßos OHLC (Open, High, Low, Close)  
- Fechamento Ajustado (Adj Close)  
- Volume  
- Retornos di√°rios (`pct_change`)  
- Features derivadas:  
  - Lags de retornos  
  - M√©dias m√≥veis e desvios (5, 21, 42 dias)  
  - Z-score e volatilidade  
  - √çndices sint√©ticos (local vs global)

**Tratamento aplicado:**
- Normaliza√ß√£o **Min-Max (0‚Äì1)** para comparabilidade.  
- Preenchimento **forward-fill** limitado a 3 dias para evitar perdas.  
- Outliers **mantidos**, pois refletem eventos reais de mercado.  

## Metodologia
1. **Coleta de dados** ‚Üí via `yfinance`.  
2. **Pr√©-processamento**  
   - Normaliza√ß√£o (MinMaxScaler e RobustScaler).  
   - Cria√ß√£o de features temporais (lags, rolling mean/std, z-score).  
   - Split temporal (treino/valida√ß√£o/teste).  
3. **Modelos testados**  
   - **LSTM** ‚Üí univariado, janelas de 21 dias, dropout, callbacks.  
   - **GBM (Gradient Boosting)** ‚Üí baseline n√£o neural, com engenharia de features.  
   - **Persist√™ncia** ‚Üí √∫ltimo valor como refer√™ncia.  
4. **Valida√ß√£o**  
   - **Cross-validation temporal** (TimeSeriesSplit).  
   - **Baseline comparativo** para medir ganhos reais.  
   - M√©tricas: RMSE, MAE, MAPE, MASE, Acur√°cia direcional, Precision, Recall, F1, AUC.  


## Resultados

### üîπ LSTM (Pre√ßo normalizado)
- RMSE e MAE pr√≥ximos ao baseline de persist√™ncia.  
- Modelo aprendeu tend√™ncia suavizada, mas **n√£o superou a persist√™ncia**.  
- Necess√°rio incluir vari√°veis externas para maior robustez.  

### üîπ LSTM (Retornos padronizados)
- Capturou melhor a **dire√ß√£o** (acur√°cia direcional ~50%).  
- Recall baixo em dias de alta ‚Üí vi√©s defensivo.  

### üîπ GBM (Regress√£o e Classifica√ß√£o)
- Serviu como baseline r√°pido e interpret√°vel.  
- Permitiu avaliar se o LSTM realmente agregava valor.  
- Mostrou que engenharia de features √© essencial em dados tabulares.  


## Insights
- O Mini D√≥lar (DOLFUT) apresenta **forte autocorrela√ß√£o di√°ria**, tornando a persist√™ncia um benchmark dif√≠cil de superar.  
- Modelos univariados s√£o insuficientes ‚Üí √© preciso **incorporar vari√°veis externas e contexto macroecon√¥mico**.  
- A correla√ß√£o rolante **WINFUT √ó DOLFUT** confirmou rela√ß√£o inversa, mas com per√≠odos de ruptura.  
- Backtests mostraram que o LSTM classificat√≥rio falhou em capturar ralis, sofrendo drawdowns maiores que o Buy & Hold.  

## Limita√ß√µes
- Dados apenas **di√°rios** (sem granularidade intraday).  
- Uso de **proxies do Yahoo Finance** em vez dos contratos futuros reais da B3.  
- Horizonte curto de an√°lise (2023‚Äì2024).  
- Custos operacionais n√£o incorporados nos backtests.  

## Pr√≥ximos Passos
- Trabalhar com **log-retornos** para estacionarizar s√©ries.  
- Incluir **vari√°veis externas** (DXY, S&P500, juros, fluxo de estrangeiros).  
- Expandir para **dados intradi√°rios (1m/5m)**.  
- Avaliar novos modelos: **ARIMA, Prophet, Transformers**.  
- Refinar backtests: considerar **custos, slippage e hedge**.  
- Criar pipeline completo com **walk-forward validation**.  

